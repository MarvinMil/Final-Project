*{box-sizing:border-box}html,body{height:100%}body{margin:0;font-family:system-ui,Arial,sans-serif}
#app{display:grid;grid-template-rows:auto 1fr;height:100%}
header{position:sticky;top:0;z-index:1000;padding:10px 16px;background:#111;color:#fff;display:flex;gap:12px;align-items:center}
header h1{margin:0;flex:1;font-size:18px;font-weight:600}
#toggleSidebar{background:#fff;color:#111;border:none;border-radius:10px;padding:6px 10px;cursor:pointer;box-shadow:0 2px 6px rgba(0,0,0,.2)}
#map{height:100%}
#sidebar{position:fixed;top:60px;right:0;width:min(380px, 40vw);min-width:300px;background:rgba(255,255,255,.98);padding:14px 14px 18px;border-radius:12px 0 0 12px;box-shadow:-6px 0 18px rgba(0,0,0,.18);max-height:calc(100vh - 70px);overflow:auto;z-index:900}
#legend{display:flex;gap:8px;margin-right:8px}.legend-step{width:24px;height:12px;border-radius:3px;border:1px solid rgba(255,255,255,.5)}
.popup-table{border-collapse:collapse;width:100%}.popup-table td{padding:4px 6px;border-bottom:1px solid #eee}
#forecast table{border-collapse:collapse;width:100%;margin-top:8px}#forecast th,#forecast td{padding:4px 6px;border-bottom:1px solid #eee;text-align:left;font-size:14px}
#forecast h3{margin:8px 0 4px 0;font-size:16px}

/* Small screens: sidebar becomes full-width bottom sheet */
@media (max-width: 900px){
  #sidebar{left:0;right:0;width:auto;min-width:0;border-radius:12px 12px 0 0;bottom:0;top:auto;max-height:65vh}
  header h1{font-size:16px}
  #toggleSidebar{font-size:14px}
}
.hidden{display:none !important}
